<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Invitation-Only</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex, nofollow" />

  <!-- KakaoTalk / DM 썸네일용 Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Invitation-Only" />
  <meta property="og:description" content="Private access for selected members." />
  <meta property="og:url" content="https://seongminju01.github.io/Invitation-Only" />
  <meta property="og:image" content="https://seongminju01.github.io/Invitation-Only/og-image.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <!-- 트위터/기타 플랫폼 카드 -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Invitation-Only" />
  <meta name="twitter:description" content="Private access for selected members." />
  <meta name="twitter:image" content="https://seongminju01.github.io/Invitation-Only/og-image.jpg" />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: #050509;
      display: flex;
      justify-content: center;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      color: #f5f5f5;
      min-height: 100vh;
    }

    .wrap {
      width: 100%;
      max-width: 520px;
    }

    .poster-frame {
      position: relative;
      width: 100%;
      overflow: hidden;
      background: #050509;
    }

    .poster-bg {
      width: 100%;
      display: block;
    }

    .text-layer {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.6s ease;
    }
    .text-layer.active {
      opacity: 1;
    }

    .hint {
      font-size: 0.75rem;
      text-align: center;
      color: #777;
      margin-top: 10px;
    }

    .footer {
      font-size: 0.7rem;
      text-align: center;
      color: #555;
      margin-top: 4px;
    }

    /* 포스터 위 버튼 오버레이 (중앙에서 살짝 하단) */
    .apply-overlay {
      position: absolute;
      left: 50%;
      top: 60%; /* 중앙보다 조금 아래 */
      transform: translate(-50%, -50%) scale(0.9);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s ease, transform 0.5s ease;
      z-index: 10;
    }

    /* 등장 시: 페이드 + scale-up */
    .apply-overlay.visible {
      opacity: 1;
      pointer-events: auto;
      transform: translate(-50%, -50%) scale(1);
    }

    /* 버튼 스타일: 글로우 (drop-shadow 기반) */
    .apply-button {
      display: inline-block;
      padding: 10px 28px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.5);
      background: rgba(0,0,0,0.75);
      font-size: 0.85rem;
      text-decoration: none;
      color: #fefefe;
      letter-spacing: 0.06em;
      filter: drop-shadow(0 0 10px rgba(255,255,255,0.4));
    }

    .apply-button:hover {
      background: rgba(255,255,255,0.08);
    }

    /* 글로우 펄스 – 느리게 */
    .apply-overlay.visible .apply-button {
      animation: glowPulse 2.6s ease-in-out infinite;
    }

    @keyframes glowPulse {
      0% {
        filter: drop-shadow(0 0 8px rgba(255,255,255,0.4));
      }
      50% {
        filter: drop-shadow(0 0 18px rgba(255,255,255,0.8));
      }
      100% {
        filter: drop-shadow(0 0 8px rgba(255,255,255,0.4));
      }
    }
  </style>
</head>
<body>
  <main class="wrap">
    <div class="poster-frame">
      <img class="poster-bg" src="bg-poster.png" alt="bg" />

      <!-- 텍스트 순서: 0 → 5 -->
      <img class="text-layer active" src="text-0.png" alt="0" />
      <img class="text-layer" src="text-1.png" alt="1" />
      <img class="text-layer" src="text-2.png" alt="2" />
      <img class="text-layer" src="text-3.png" alt="3" />
      <img class="text-layer" src="text-4.png" alt="4" />
      <img class="text-layer" src="text-5.png" alt="5" />

      <!-- 오버레이 버튼 -->
      <div class="apply-overlay">
        <a
          class="apply-button"
          href="https://forms.gle/Ux5b3xLe1nCsZYDm9"
          target="_blank"
          rel="noopener noreferrer"
        >
          신청
        </a>
      </div>
    </div>

    <p class="hint">Tap / Scroll to Continue</p>
    <p class="footer">Invitation-Only</p>
  </main>

  <!-- 배경 음악 -->
  <audio id="bgm" src="bgm.mp3" loop></audio>

  <script>
    const layers = document.querySelectorAll('.text-layer');
    const applyOverlay = document.querySelector('.apply-overlay');
    const bgm = document.getElementById('bgm');

    let currentIndex = 0;
    let lastTriggerTime = 0;
    const MIN_INTERVAL = 700;
    let musicStarted = false;

    function startMusic() {
      if (!musicStarted && bgm) {
        bgm.volume = 0.7;
        bgm.play().catch(() => {});
        musicStarted = true;
      }
    }

    function showSlide(idx) {
      layers.forEach((el, i) => {
        el.classList.toggle('active', i === idx);
      });
      // 마지막(text-5)에서만 버튼 표시
      applyOverlay.classList.toggle('visible', idx === layers.length - 1);
    }

    function nextSlide() {
      const now = Date.now();
      if (now - lastTriggerTime < MIN_INTERVAL) return;
      lastTriggerTime = now;

      if (currentIndex < layers.length - 1) {
        currentIndex++;
        showSlide(currentIndex);
      }
    }

    function advance() {
      startMusic();
      nextSlide();
    }

    // 클릭/탭
    document.addEventListener('click', advance);

    // 키보드
    document.addEventListener('keydown', (e) => {
      if ([' ', 'Enter', 'ArrowDown', 'ArrowRight'].includes(e.key)) {
        e.preventDefault();
        advance();
      }
    });

    // 휠
    document.addEventListener('wheel', (e) => {
      if (Math.abs(e.deltaY) > 10) {
        e.preventDefault();
        advance();
      }
    }, { passive: false });

    // 터치
    let tsY = null;
    document.addEventListener('touchstart', (e) => {
      if (e.touches.length === 1) {
        tsY = e.touches[0].clientY;
      }
    }, { passive: true });

    document.addEventListener('touchend', (e) => {
      if (tsY === null) {
        advance();
        return;
      }
      const diff = tsY - e.changedTouches[0].clientY;
      // 스와이프 여부 크게 안 따지고, 입력 자체를 트리거로 사용
      advance();
      tsY = null;
    });

    // 초기 상태
    showSlide(currentIndex);
  </script>
</body>
</html>
